/**
 * VIOVNL.Flowy.Blazor - Layout Components
 * 
 * Defines the main layout structure for the Flowy canvas system:
 * - Components Panel (left sidebar with draggable component items)
 * - Canvas Panel (main workspace for tree visualization)
 * - Viewport and Transform Wrapper (zoom/pan container)
 * 
 * Layout Hierarchy:
 * .components-panel (fixed sidebar)
 * .canvas-panel (main area)
 *   └─ .canvas-area
 *      └─ .canvas-viewport (overflow: hidden, grab cursor)
 *         └─ .canvas-transform-wrapper (transform: translate() scale())
 *            ├─ .canvas-placeholder (empty state message)
 *            ├─ .flow-node elements (tree nodes)
 *            └─ .connections-svg (connection lines)
 */

/* ========================================
   COMPONENTS PANEL - Left Sidebar
   Displays draggable component items that can be added to canvas
   ======================================== */

.components-panel {
    /* Panel dimensions and positioning */
    width: 100%;
    height: 100%;
    
    /* Visual styling following Fluent UI 2 */
    background: var(--colorNeutralBackground1);
    box-shadow: var(--shadow8);
    border-right: 1px solid var(--colorNeutralStroke2);
    
    /* Flexbox layout for header + scrollable content */
    display: flex;
    flex-direction: column;
    overflow: hidden;
    
    /* Layering above canvas but below modals */
    position: relative;
    z-index: 10;
}

/* Panel header with title */
.components-panel h3 {
    /* Spacing and sizing */
    padding: var(--spacingHorizontalXL) var(--spacingHorizontalL);
    margin: 0;
    
    /* Typography using Fluent UI 2 tokens */
    font-size: var(--fontSizeHero700);
    font-weight: var(--fontWeightSemibold);
    color: var(--colorNeutralForeground1);
    letter-spacing: -0.01em; /* Tighter tracking for large text */
    
    /* Visual separation from content */
    background: var(--colorNeutralBackground1);
    border-bottom: 1px solid var(--colorNeutralStroke2);
}

/* Scrollable container for component items */
.component-list {
    /* Take remaining space after header */
    flex: 1;
    
    /* Scrolling behavior */
    overflow-y: auto;
    padding: var(--spacingHorizontalM);
    
    /* Subtle background contrast */
    background: var(--colorNeutralBackground2);
}

/* Individual draggable component item */
.component-item {
    /* Spacing and layout */
    padding: var(--spacingHorizontalM);
    margin-bottom: var(--spacingHorizontalM);
    display: flex;
    align-items: center;
    
    /* Visual styling - card appearance */
    background: var(--colorNeutralBackground2);
    border-radius: var(--borderRadiusMedium);
    border: 1px solid var(--colorNeutralStroke2);
    box-shadow: var(--shadow2);
    
    /* Interactive cursor */
    cursor: grab;
    
    /* Smooth hover transitions */
    transition: all var(--durationNormal) var(--curveEasyEase);
    
    /* Positioning context for accent bar */
    position: relative;
    overflow: hidden;
    
    /* Prevent text selection during drag */
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
}

/* Disable grab cursor when drag & drop is disabled globally */
.components-panel.drag-disabled .component-item {
    cursor: default;
}

/* Color accent bar on left edge of component item */
.component-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 3px;
    height: 100%;
    
    /* Color from component data via CSS variable */
    background: var(--item-color, var(--colorBrandBackground));
    border-radius: var(--borderRadiusSmall) 0 0 var(--borderRadiusSmall);
}

/* Hover effect - lift and highlight */
.component-item:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow8);
    background: var(--colorNeutralBackground1);
    border-color: var(--colorNeutralStroke1);
}

/* Active (mousedown) effect - press down */
.component-item:active {
    cursor: grabbing;
    transform: translateY(0);
    box-shadow: var(--shadow2);
}

/* Component item content wrapper */
.component-info {
    flex: 1;
}

/* Component name - primary text */
.component-name {
    font-weight: var(--fontWeightSemibold);
    font-size: var(--fontSizeBase400);
    color: var(--colorNeutralForeground1);
    margin-bottom: var(--spacingHorizontalXXS);
    line-height: 20px;
}

/* Component type/description - secondary text */
.component-type {
    font-size: var(--fontSizeBase300);
    color: var(--colorNeutralForeground3);
    font-weight: var(--fontWeightRegular);
    line-height: 16px;
}

/* ========================================
   CANVAS PANEL - Main Workspace
   Contains the interactive tree visualization canvas
   ======================================== */

.canvas-panel {
    /* Full size container */
    width: 100%;
    height: 100%;
    
    /* Flexbox for toolbar + canvas area */
    display: flex;
    flex-direction: column;
    
    /* Background and layering */
    background: var(--colorNeutralBackground2);
    position: relative;
    z-index: 1;
}

/* Canvas workspace area */
.canvas-area {
    /* Take all available space */
    flex: 1;
    position: relative;
    
    /* No additional styling (viewport provides background) */
    border-radius: 0;
    box-shadow: none;
    overflow: hidden;
    background: var(--colorNeutralBackground3);
}

/* ========================================
   CANVAS VIEWPORT - Zoom/Pan Container
   Provides overflow clipping and background pattern
   ======================================== */

.canvas-viewport {
    /* Fill parent canvas area */
    width: 100%;
    height: 100%;
    position: relative;
    
    /* Clip content to bounds (required for pan) */
    overflow: hidden;
    
    /* Interactive cursor for panning */
    cursor: grab;
    
    /* Grid dot pattern background for spatial reference */
    background-color: var(--colorNeutralBackground1);
    background-image: radial-gradient(circle, var(--colorNeutralStroke2) 1px, transparent 1px);
    background-size: 20px 20px;
}

/* Disable grab cursor when drag & drop is disabled globally */
.canvas-viewport.drag-disabled {
    cursor: default;
}

/* Grabbing cursor during pan operation */
.canvas-viewport:active {
    cursor: grabbing;
}

/* Prevent grabbing cursor when drag & drop is disabled */
.canvas-viewport.drag-disabled:active {
    cursor: default;
}

/* ========================================
   CANVAS TRANSFORM WRAPPER
   Applies zoom (scale) and pan (translate) transforms
   ======================================== */

.canvas-transform-wrapper {
    /* Fill viewport */
    width: 100%;
    height: 100%;
    
    /* Transform applied from JavaScript: translate(panX, panY) scale(zoom) */
    transform-origin: 0 0;  /* Scale from top-left corner */
    position: relative;
}

/* ========================================
   CANVAS PLACEHOLDER - Empty State
   Shown when no nodes exist on canvas
   ======================================== */

.canvas-placeholder {
    /* Center in viewport */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    
    /* Typography */
    color: var(--colorNeutralForeground3);
    font-size: var(--fontSizeHero700);
    font-weight: var(--fontWeightSemibold);
    text-align: center;
    
    /* Non-interactive (allow clicks to pass through) */
    pointer-events: none;
    opacity: 0.5;
    
    /* Gentle pulsing animation */
    animation: pulse 3s ease-in-out infinite;
}

/* ========================================
   SCROLLBAR STYLING
   Custom scrollbar design for components list and canvas area
   ======================================== */

.component-list::-webkit-scrollbar,
.canvas-area::-webkit-scrollbar {
    width: 12px;
    height: 12px;
}

.component-list::-webkit-scrollbar-track {
    background: var(--colorNeutralBackground3);
    border-radius: var(--borderRadiusSmall);
}

.canvas-area::-webkit-scrollbar-track {
    background: var(--colorNeutralBackground3);
    border-radius: var(--borderRadiusSmall);
}

.component-list::-webkit-scrollbar-thumb {
    background: var(--colorNeutralStroke1);
    border-radius: var(--borderRadiusSmall);
    border: 2px solid var(--colorNeutralBackground3);
}

.canvas-area::-webkit-scrollbar-thumb {
    background: var(--colorNeutralStroke1);
    border-radius: var(--borderRadiusSmall);
    border: 2px solid var(--colorNeutralBackground3);
}

.component-list::-webkit-scrollbar-thumb:hover,
.canvas-area::-webkit-scrollbar-thumb:hover {
    background: var(--colorNeutralForeground3);
}
